<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ì–´ ë…í•´ ì‹¬í™” ê°•ì˜ ìŠ¬ë¼ì´ë“œ (ìµœì¢… ì™„ì„±ë³¸)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .slide {
            transition: opacity 0.5s ease-in-out;
            position: absolute;
            inset: 0;
            padding: 2rem 2.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow-y: auto;
        }
        .slide-content {
             width: 100%;
        }
        .hidden-content {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out, max-height 0.4s ease-in-out;
            max-height: 0;
            overflow: hidden;
        }
        .visible-content {
            opacity: 1;
            transform: translateY(0);
            max-height: 500px; /* ì¶©ë¶„í•œ ë†’ì´ */
        }
        /* ì• ë‹ˆë©”ì´ì…˜ ì•„ì´í…œ ìŠ¤íƒ€ì¼ */
        .animated-item {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .animated-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .highlight-yellow { background: linear-gradient(to top, #fff59d 50%, transparent 50%); }
        .highlight-blue { background: linear-gradient(to top, #90caf9 50%, transparent 50%); }
        .highlight-green { background: linear-gradient(to top, #a5d6a7 50%, transparent 50%); }
        .highlight-red { background: linear-gradient(to top, #ef9a9a 50%, transparent 50%); }
        
        .example-box {
            background-color: #f8fafc;
            border-left: 4px solid #60a5fa;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
        .explanation-box {
            background-color: #f0f9ff;
            border-left: 4px solid #2563eb;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
         .analysis-box {
            background-color: #f3e8ff;
            border-left: 4px solid #8b5cf6;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
        .base-button {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            color: white;
            font-weight: bold;
            border-radius: 9999px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            border: none;
        }
        .base-button:hover:not(:disabled) {
            transform: scale(1.05);
        }
        .base-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .reveal-button {
            background-color: #3b82f6;
        }
        .reveal-button:hover:not(:disabled) {
            background-color: #2563eb;
        }
        .gemini-button {
            background-color: #8b5cf6;
            margin-left: 0.5rem;
        }
        .gemini-button:hover:not(:disabled) {
            background-color: #7c3aed;
        }
        .quiz-option:hover {
            background-color: #e0e7ff;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-4xl mx-auto">
        <div id="slides-container" class="relative bg-white rounded-xl shadow-2xl overflow-hidden" style="height: 650px;">
            <!-- Slides will be injected here by JavaScript -->
        </div>

        <!-- Navigation -->
        <div class="flex justify-between items-center mt-6">
            <button id="prev-button" class="bg-white hover:bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg shadow transition disabled:opacity-50 disabled:cursor-not-allowed">
                ì´ì „
            </button>
            <div id="slide-counter" class="text-gray-600 font-semibold"></div>
            <button id="next-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow transition disabled:opacity-50 disabled:cursor-not-allowed">
                ë‹¤ìŒ
            </button>
        </div>
    </div>

    <script>
    // --- Slide Data ---
    const slideData = [
        { type: 'cover', title: 'ë…í•´ì˜ ì‹œì‘', subtitle: 'ë©”ë¥´ì„¼ ì˜ì–´ - ê¶Œìµì¤€ ì„ ìƒë‹˜' },
        {
            type: 'animated-text-reveal',
            title: 'ë…í•´ê°€ ì–´ë ¤ìš´ ì´ìœ ?',
            items: [
                { text: 'ì–´íœ˜?', class: 'text-4xl text-gray-500' },
                { text: 'ë¬¸ë²•?', class: 'text-4xl text-gray-500' },
                { text: 'ê²°êµ­... <span class="highlight-red font-black">ë¬¸ì¥ì´ ê¸¸ì–´ì„œ!</span>', class: 'text-6xl text-red-600 font-bold mt-8' }
            ]
        },
        { 
            type: 'simple', 
            title: 'ë„ì „! ê¸´ ë¬¸ì¥ í•´ì„í•˜ê¸° âœï¸',
            content: 'ì´ ë¬¸ì¥ì„ ì‰½ê²Œ í•´ì„í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì§€ê¸ˆë¶€í„° ê·¸ ë¹„ë²•ì„ í•˜ë‚˜ì”© ì•Œë ¤ë“œë¦´ê²Œìš”.',
            example: '"Since that time, it has become apparent that broadly effective pesticides can have harmful effects on beneficial insects, which can negate their effects in controlling pests, and that persistent pesticides can damage non-target organisms in the ecosystem, such as birds and people."'
        },
        {
            type: 'animated-list',
            title: 'ë¬¸ì¥ì„ ê¸¸ê²Œ ë§Œë“œëŠ” 6ê°€ì§€ í•µì‹¬ ë©ì–´ë¦¬',
            items: [
                'ì ‘ì†ì‚¬ (because, when, that...)',
                'ê´€ê³„ì‚¬ (who, which, that...)',
                'ì „ì¹˜ì‚¬ (in, on, for, of...)',
                'toë¶€ì •ì‚¬ (to do, to see...)',
                'ing (í˜„ì¬ë¶„ì‚¬)',
                'ê³¼ê±°ë¶„ì‚¬ (p.p.)'
            ]
        },
        {
            type: 'overview',
            title: 'ëŠì–´ì½ê¸°ë¥¼ ì™„ì„±í•˜ëŠ” 3ê°€ì§€ ì¶”ê°€ ë²•ì¹™ â•',
            content: 'ì•ì„œ ë°°ìš´ 6ê°€ì§€ í•µì‹¬ ë©ì–´ë¦¬ ì™¸ì—, ì•„ë˜ 3ê°€ì§€ ê·œì¹™ì„ ë”í•˜ë©´ ë…í•´ë¥¼ ìœ„í•œ <span class="font-bold text-red-500">9ê°€ì§€ ëŠì–´ì½ê¸° ë²•ì¹™</span>ì´ ì™„ì„±ë©ë‹ˆë‹¤!',
            sections: [
                { title: '1. ëª…ì‚¬ + ì£¼ì–´ + ë™ì‚¬', description: 'ëª…ì‚¬ ë’¤ì— [ì£¼ì–´+ë™ì‚¬]ê°€ ì˜¤ë©´ ê·¸ ì•ì—ì„œ ëŠì–´ìš”. (ê´€ê³„ì‚¬ ìƒëµ)' },
                { title: '2. ë™ì‚¬ + ì£¼ì–´ + ë™ì‚¬', description: 'ë™ì‚¬ ë’¤ì— [ì£¼ì–´+ë™ì‚¬]ê°€ ì˜¤ë©´ ê·¸ ì•ì—ì„œ ëŠì–´ìš”. (ì ‘ì†ì‚¬ ìƒëµ)' },
                { title: '3. ì£¼ì–´ ... ë™ì‚¬', description: 'ì£¼ì–´ì™€ ë™ì‚¬ê°€ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆìœ¼ë©´ ë™ì‚¬ ì•ì—ì„œ ëŠì–´ìš”.' }
            ]
        },
        { 
            type: 'interactive', 
            title: 'ì¶”ê°€ ë²•ì¹™ 1: ëª…ì‚¬ + ì£¼ì–´ + ë™ì‚¬', 
            description: 'ëª…ì‚¬ ë’¤ì— [ì£¼ì–´+ë™ì‚¬]ê°€ ì˜¤ë©´, (ê´€ê³„ì‚¬ê°€ ìƒëµëœ) ìˆ˜ì‹ì–´êµ¬ë¥¼ ê´„í˜¸ë¡œ ë¬¶ê³  ë³¸ë™ì‚¬ ì•ì—ì„œ ëŠì–´ì£¼ì„¸ìš”.', 
            example: 'The book (I bought yesterday) <span class="text-red-500">/</span> is very interesting.', 
            explanation: 'ê·¸ ì±…ì€ (ë‚´ê°€ ì–´ì œ ìƒ€ë˜) / ë§¤ìš° í¥ë¯¸ë¡­ë‹¤.',
            buttonText: 'í•´ì„ ë³´ê¸° âœ¨'
        },
        { 
            type: 'interactive', 
            title: 'ì¶”ê°€ ë²•ì¹™ 2: ë™ì‚¬ + ì£¼ì–´ + ë™ì‚¬', 
            description: 'think, know, believe ê°™ì€ ë™ì‚¬ ë’¤ì— ë˜ ë‹¤ë¥¸ [ì£¼ì–´ + ë™ì‚¬]ê°€ ë‚˜ì˜¤ë©´, ê·¸ ì•ì—ì„œ ëŠì–´ì£¼ì„¸ìš”. ì ‘ì†ì‚¬ thatì´ ìƒëµëœ í˜•íƒœì…ë‹ˆë‹¤.', 
            example: 'I think <span class="text-red-500">/</span> he is honest.', 
            explanation: 'ë‚˜ëŠ” ìƒê°í•œë‹¤ / ê·¸ê°€ ì •ì§í•˜ë‹¤ê³ .',
            buttonText: 'í•´ì„ ë³´ê¸° âœ¨'
        },
        { 
            type: 'interactive', 
            title: 'ì¶”ê°€ ë²•ì¹™ 3: ì£¼ì–´ ... ë™ì‚¬', 
            description: 'ì£¼ì–´ë¥¼ ê¾¸ë©°ì£¼ëŠ” ë§ì´ ê¸¸ì–´ì§€ë©´, ê·¸ ìˆ˜ì‹ì–´êµ¬ë¥¼ ê´„í˜¸ë¡œ ë¬¶ê³  ì§„ì§œ ë™ì‚¬ ì•ì—ì„œ ëŠì–´ì£¼ì„¸ìš”.', 
            example: 'The man (standing over there) <span class="text-red-500">/</span> is my brother.', 
            explanation: 'ê·¸ ë‚¨ìëŠ” (ì €ê¸° ì„œ ìˆëŠ”) / ë‚˜ì˜ í˜•ì´ë‹¤.',
            buttonText: 'í•´ì„ ë³´ê¸° âœ¨'
        },
        { 
            type: 'interactive', 
            title: 'ë…í•´ì˜ ì²« ë‹¨ê³„ âœ‚ï¸: ëŠì–´ì½ê¸° ì ìš©', 
            description: 'ì–´ë ¤ì› ë˜ ë¬¸ì¥ì— 9ê°€ì§€ ëŠì–´ì½ê¸° ë²•ì¹™ì„ ì ìš©í•˜ë©´ ì´ë ‡ê²Œ ì˜ê²Œ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ìš”!', 
            example: '"Since that time, <span class="text-red-500">/</span> it has become apparent <span class="text-red-500">/</span> that broadly effective pesticides can have harmful effects <span class="text-red-500">/</span> on beneficial insects, <span class="text-red-500">/</span> which can negate their effects <span class="text-red-500">/</span> in controlling pests, <span class="text-red-500">/</span> and that persistent pesticides can damage non-target organisms <span class="text-red-500">/</span> in the ecosystem, <span class="text-red-500">/</span> such as birds and people."', 
            explanation: '"ê·¸ë•Œë¶€í„°, / ëª…ë°±í•´ì¡Œë‹¤ / ê´‘ë²”ìœ„í•˜ê²Œ íš¨ê³¼ì ì¸ ì‚´ì¶©ì œëŠ” í•´ë¡œìš´ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ / ìœ ìµí•œ ê³¤ì¶©ë“¤ì—ê²Œ, / ê·¸ë¦¬ê³  ê·¸ê²ƒì€ í•´ì¶© í†µì œì— ìˆì–´ì„œ ê·¸ë“¤ì˜ íš¨ê³¼ë¥¼ ë¬´íš¨í™”í•  ìˆ˜ ìˆë‹¤ / ê·¸ë¦¬ê³  ì§€ì†ì„± ìˆëŠ” ì‚´ì¶©ì œëŠ” ìƒíƒœê³„ì˜ ì˜ë„ì¹˜ ì•Šì€ ìœ ê¸°ì²´ì—ê²Œ í”¼í•´ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ / ìƒˆë‚˜ ì‚¬ëŒê³¼ ê°™ì€"',
            buttonText: 'í•´ì„ ë³´ê¸° âœ¨'
        },
        {
            type: 'overview',
            title: 'êµ¬ì‚¬ ë²•ì¹™: ëŠê³  â†’ ì—°ê²°í•˜ê¸° ğŸ”—',
            content: 'ë…í•´ëŠ” 2ë‹¨ê³„ë¡œ ì™„ì„±ë¼ìš”. ë¨¼ì €, ë¬¸ì¥ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“œëŠ” **9ê°€ì§€ ëŠì–´ì½ê¸° ë²•ì¹™**ìœ¼ë¡œ ë©ì–´ë¦¬ë¥¼ ë‚˜ëˆ ìš”. ê·¸ ë‹¤ìŒ, ëŠì–´ì§„ ë©ì–´ë¦¬ë“¤ì„ ë§¤ë„ëŸ½ê²Œ ì´ì–´ì£¼ëŠ” **4ê°€ì§€ ì—°ê²° í•µì‹¬ ë²•ì¹™**ì„ ì ìš©í•´ìš”. ì´ ì „ì²´ ê³¼ì •ì´ ë°”ë¡œ êµ¬ì‚¬ ë²•ì¹™ì…ë‹ˆë‹¤!',
            sections: [
                { title: '1. ì€/ëŠ”/ì´/ê°€ ë²•ì¹™', description: 'ì£¼ì–´ë¥¼ ì•Œë§ê²Œ í•´ì„í•˜ê¸°' },
                { title: '2. ì¡°ì‚¬ì˜ í™œìš©', description: 'ì „ì¹˜ì‚¬ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ì´ê¸°' },
                { title: '3. "ì–´ë–¤ ë­?" ë²•ì¹™', description: 'ê¾¸ë©°ì£¼ëŠ” ë§ì„ ëª…í™•í•˜ê²Œ' },
                { title: '4. ìì£¼ ë‚˜ì˜¤ëŠ” í•µì‹¬ íŒ¨í„´', description: 'í•„ìˆ˜ í‘œí˜„ ìµíˆê¸°' }
            ]
        },
        { type: 'interactive', title: 'êµ¬ì‚¬ ë²•ì¹™ 1: ì€/ëŠ”/ì´/ê°€', description: 'ë¬¸ì¥ì„ ë§¤ë„ëŸ½ê²Œ ì—°ê²°í•˜ê¸° ìœ„í•´ ì£¼ì–´ì— \'ì€/ëŠ”\' ë˜ëŠ” \'ì´/ê°€\'ë¥¼ ì•Œë§ê²Œ ë¶™ì—¬ìš”.<br>ğŸ”µ <span class="font-bold text-blue-700">\'ì´/ê°€\'</span>: ì ‘ì†ì‚¬/ê´€ê³„ì‚¬ ì•ˆì˜ ì£¼ì–´<br>ğŸŸ¢ <span class="font-bold text-green-700">\'ì€/ëŠ”\'</span>: ë¬¸ì¥ ì „ì²´ì˜ ì§„ì§œ ì£¼ì–´', rule_prompt: "a sentence where a main clause subject is distinguished from a subordinate clause subject", example: '"Documents, folders, and desktops are the terms we use because Steve Jobs understood that using familiar terms would make the new technology easier to understand."', explanation: '"ë¬¸ì„œì™€ í´ë” ë°ìŠ¤í¬íƒ‘<span class="highlight-green">ì€</span> ìš©ì–´ë‹¤ / ìš°ë¦¬<span class="highlight-blue">ê°€</span> ì‚¬ìš©í•˜ëŠ” / ìŠ¤í‹°ë¸Œ ì¡ìŠ¤<span class="highlight-blue">ê°€</span> ì´í•´í–ˆê¸° ë•Œë¬¸ì— / ì¹œìˆ™í•œ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ<span class="highlight-blue">ì´</span> ìƒˆë¡œìš´ ê¸°ìˆ ì„ ì´í•´í•œë‹¤ëŠ” ê²ƒì„"' },
        { type: 'interactive', title: 'êµ¬ì‚¬ ë²•ì¹™ 2: ì¡°ì‚¬ì˜ í™œìš©', description: 'ì „ì¹˜ì‚¬ì˜ ëœ»ì„ ì •í™•íˆ ì•Œê³  ë¬¸ë§¥ì— ë§ëŠ” ì¡°ì‚¬ë¥¼ ë¶™ì—¬ì£¼ëŠ” ì„¼ìŠ¤ê°€ í•„ìš”í•´ìš”!', rule_prompt: "a sentence using prepositions like 'from', 'in', and 'of' to show relationships between nouns", example: '"Firms directly benefit from the decrease in their costs of production and provision of services."', explanation: '"íšŒì‚¬ë“¤ì€ ì§ì ‘ì ìœ¼ë¡œ ì´ìµì„ ì–»ëŠ”ë‹¤ ê°ì†Œ<span class="highlight-blue">ë¡œë¶€í„°</span> / ìƒì‚° ë¹„ìš©ê³¼ ì„œë¹„ìŠ¤ ì œê³µ ë¹„ìš©<span class="highlight-blue">ì˜</span> ê°ì†Œ<span class="highlight-blue">ë¡œë¶€í„°</span>"' },
        { type: 'interactive', title: 'êµ¬ì‚¬ ë²•ì¹™ 2: ì¡°ì‚¬ì˜ í™œìš©', description: 'ì „ì¹˜ì‚¬ onì„ ë¬¸ë§¥ì— ë§ê²Œ \'~ì— ë¼ì¹˜ëŠ”\'ìœ¼ë¡œ í•´ì„í•˜ë©´ í›¨ì”¬ ìì—°ìŠ¤ëŸ¬ì›Œìš”.', rule_prompt: "a phrase using 'on' to show impact or effect", example: '"the impact of reward immediacy on decision-making"', explanation: '"ë³´ìƒ ì¦‰ê°ì„±ì˜ ì˜í–¥ / ê²°ì •<span class="highlight-blue">ì— ë¼ì¹˜ëŠ”</span>"' },
        { type: 'interactive', title: 'êµ¬ì‚¬ ë²•ì¹™ 2: ì¡°ì‚¬ì˜ í™œìš©', description: 'ofëŠ” \'~ì˜\', forëŠ” \'~ì„ ìœ„í•œ\' ë“±, ì „ì¹˜ì‚¬ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°í•´ì•¼ í•´ìš”.', rule_prompt: "a phrase using 'of' and 'for' to show purpose and possession", example: '"significance of note taking for active engagement in discussion"', explanation: '"ë©”ëª¨<span class="highlight-blue">ì˜</span> ì¤‘ìš”ì„± / ë…¼ì˜ì˜ ì ê·¹ì ì¸ ì°¸ì—¬<span class="highlight-blue">ë¥¼ ìœ„í•œ</span>"' },
        { type: 'interactive', title: 'êµ¬ì‚¬ ë²•ì¹™ 3: "ì–´ë–¤ ë­?"', description: 'ëª…ì‚¬ë¥¼ ê¾¸ë©°ì£¼ëŠ” ë§ì´ ë‚˜ì˜¤ë©´, ë§ˆìŒì†ìœ¼ë¡œ <span class="font-bold">"ì–´ë–¤ ë­?"</span>ë¼ê³  ë¬¼ì–´ë³´ì„¸ìš”. ë¬¸ì¥ êµ¬ì¡°ê°€ í•œëˆˆì— ë³´ì—¬ìš”!', rule_prompt: "a complex sentence with multiple relative clauses or phrases modifying nouns", example: '"The big problem with money created by the government is that those who run the government always face the temptation to create more money and spend it."', explanation: `"ì»¤ë‹¤ë€ ë¬¸ì œ <span class='text-red-500'>(ì–´ë–¤ ë¬¸ì œ?)</span> ëˆì˜ ë¬¸ì œ <span class='text-red-500'>(ì–´ë–¤ ëˆ?)</span> ì •ë¶€ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” ëˆì˜ ë¬¸ì œëŠ” / ì‚¬ëŒë“¤ <span class='text-red-500'>(ì–´ë–¤ ì‚¬ëŒë“¤?)</span> ì •ë¶€ë¥¼ ìš´ì˜í•˜ëŠ” ì‚¬ëŒë“¤ì´ ìœ í˜¹ì„ ë§ˆì£¼í•œë‹¤ëŠ” ê±°ë‹¤ <span class='text-red-500'>(ì–´ë–¤ ìœ í˜¹?)</span> ë” ë§ì€ ëˆì„ ë§Œë“¤ì–´ë‚´ê³  ê·¸ê²ƒì„ ì“°ë¼ëŠ” ìœ í˜¹"` },
        { type: 'title', title: 'ìì£¼ ë‚˜ì˜¤ëŠ” í•µì‹¬ íŒ¨í„´ ğŸ§©', content: 'ë¹ ë¥´ê³  ì •í™•í•œ ë…í•´ë¥¼ ìœ„í•œ í•„ìˆ˜ íŒ¨í„´ë“¤ì„ í•˜ë‚˜ì”© ì‚´í´ë´ìš”!' },
        { type: 'interactive', title: 'íŒ¨í„´ 1: ì ‘ì†ì‚¬ ë©ì–´ë¦¬', description: '[ì ‘ì†ì‚¬ + ì£¼ì–´ + ë™ì‚¬] ë©ì–´ë¦¬ëŠ” ë¬¸ë§¥ì— ë§ëŠ” \'ì ‘ì†ì‚¬ì˜ ëœ»\'ìœ¼ë¡œ í•´ì„ì„ ë§ˆì³ì•¼ í•´ìš”.', example: 'When he arrived, <span class="text-red-500">/</span> we started the meeting.', explanation: 'ê·¸ê°€ ë„ì°©í–ˆì„ ë•Œ / ìš°ë¦¬ëŠ” íšŒì˜ë¥¼ ì‹œì‘í–ˆë‹¤.', buttonText: 'í•´ì„ ë³´ê¸° âœ¨' },
        { type: 'interactive', title: 'íŒ¨í„´ 2: ì „ì¹˜ì‚¬ ë©ì–´ë¦¬', description: '[ì „ì¹˜ì‚¬ + ëª…ì‚¬] ë©ì–´ë¦¬ëŠ” ë¬¸ë§¥ì— ë§ëŠ” \'ì „ì¹˜ì‚¬ì˜ ëœ»\'ìœ¼ë¡œ í•´ì„ì„ ë§ˆì³ì•¼ í•´ìš”.', example: 'He put the book <span class="text-red-500">/</span> on the desk.', explanation: 'ê·¸ëŠ” ì±…ì„ ë†“ì•˜ë‹¤ / ì±…ìƒ ìœ„ì—.', buttonText: 'í•´ì„ ë³´ê¸° âœ¨' },
        { type: 'interactive', title: 'íŒ¨í„´ 3: toë¶€ì •ì‚¬ (~ê°€ ~í•˜ëŠ” ê²ƒ)', description: '`for + ëª©ì ê²©` ë’¤ì— toë¶€ì •ì‚¬ê°€ ì˜¤ë©´, `for + ëª©ì ê²©`ì„ ì£¼ì–´ì²˜ëŸ¼ \'~ì´/ê°€\'ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence starting with 'It is [adjective] for [someone] to [do something]'", example: '"It is difficult for us to maintain a constant level of attention throughout our working day."', explanation: '"ì–´ë µë‹¤ / <span class="highlight-blue">ìš°ë¦¬ê°€</span> ëŠì„ì—†ëŠ” ì£¼ì˜ë ¥ ìˆ˜ì¤€ì„ ìœ ì§€í•˜ëŠ” ê²Œ"' },
        { type: 'interactive', title: 'íŒ¨í„´ 3: toë¶€ì •ì‚¬ (~í•˜ê¸° ìœ„í•´)', description: 'ë¬¸ì¥ ë§¨ ì•ì— `To ..., ì£¼ì–´ + ë™ì‚¬` í˜•íƒœëŠ” `~í•˜ê¸° ìœ„í•´`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence starting with an infinitive of purpose", example: '"To attract a wide audience, stories should focus on topics that interest many people."', explanation: '"í­ë„“ì€ ê´€ê°ì„ ëŒì–´ë“¤ì´ê¸° <span class="highlight-blue">ìœ„í•´</span> / ì´ì•¼ê¸°ë“¤ì€ ~ì— ì§‘ì¤‘í•´ì•¼ í•œë‹¤."' },
        { type: 'interactive', title: 'íŒ¨í„´ 3: toë¶€ì •ì‚¬ (~í•˜ëŠ” ê²ƒì€)', description: 'ë¬¸ì¥ ë§¨ ì•ì— `To ...`ê°€ ë™ì‚¬ì™€ ë°”ë¡œ ì—°ê²°ë˜ë©´ `~í•˜ëŠ” ê²ƒì€`ìœ¼ë¡œ ì£¼ì–´ì²˜ëŸ¼ í•´ì„í•´ìš”.', rule_prompt: "a sentence where an infinitive phrase is the subject", example: '"To monitor our surroundings is to focus on what\'s outside of ourselves"', explanation: '"ìš°ë¦¬ì˜ ì£¼ë³€ì„ ì‚´í”¼ëŠ” <span class="highlight-blue">ê²ƒì€</span> / ìš°ë¦¬ ìì‹  ì™¸ë¶€ì˜ ê²ƒì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ë‹¤."' },
        { type: 'interactive', title: 'íŒ¨í„´ 4: ì½¤ë§ˆ(,) ing', description: 'ë¬¸ì¥ ë’¤ì— `, ing`ê°€ ì˜¤ë©´ `~í•˜ë©´ì„œ`ë¼ê³  ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²°í•´ìš”.', rule_prompt: "a sentence with a participial phrase (using an -ing verb) at the end, set off by a comma", example: '"This has happened again and again over the centuries, leading to inflation..."', explanation: '"ì´ê²ƒì€ ê³„ì†í•´ì„œ ëª‡ ì„¸ê¸° ë™ì•ˆ ì¼ì–´ë‚¬ë‹¤ / ì¸í”Œë ˆì´ì…˜ì„ ì´ëŒ<span class="highlight-blue">ë©´ì„œ</span>"' },
        { type: 'interactive', title: 'íŒ¨í„´ 5: as', description: 'asëŠ” ë¬¸ë§¥ì— ë”°ë¼ <span class="highlight-yellow">~í•  ë•Œ, ~ë•Œë¬¸ì—, ~ì²˜ëŸ¼, ~ë¡œì„œ</span> 4ê°€ì§€ë¡œ í•´ì„ë¼ìš”.', rule_prompt: "a sentence using 'as' to mean 'like' or 'in the same way'", example: '"...our feet and legs still react as they did in prehistoric times."', explanation: '"...ìš°ë¦¬ì˜ ë°œê³¼ ë‹¤ë¦¬ëŠ” ì—¬ì „íˆ ë°˜ì‘í•œë‹¤ / ê·¸ê²ƒë“¤ì´ ì„ ì‚¬ ì‹œëŒ€ì— ê·¸ë¬ë˜ <span class="highlight-blue">ê²ƒì²˜ëŸ¼</span>"' },
        { type: 'interactive', title: 'íŒ¨í„´ 6: how + í˜•ìš©ì‚¬/ë¶€ì‚¬', description: 'how ë’¤ì— `í˜•ìš©ì‚¬/ë¶€ì‚¬`ê°€ ì˜¤ë©´ `ì–¼ë§ˆë‚˜`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence using 'how' followed by an adjective or adverb", example: '"Imagine how difficult it would be to converse with someone..."', explanation: '"ìƒìƒí•´ ë´ë¼ / <span class="highlight-blue">ì–¼ë§ˆë‚˜</span> ì–´ë ¤ìš¸ì§€ ëˆ„êµ°ê°€ì™€ ëŒ€í™”í•˜ëŠ” ê²Œ"' },
        { type: 'interactive', title: 'íŒ¨í„´ 6: how + ì£¼ì–´+ë™ì‚¬', description: 'how ë’¤ì— `ì£¼ì–´+ë™ì‚¬` ì ˆì´ ì˜¤ë©´ `ì–´ë–»ê²Œ`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence using 'how' to mean 'in what way'", example: '"Paying with plastic fundamentally changes how we spend money..."', explanation: '"ì¹´ë“œë¥¼ ê°€ì§€ê³  ì§€ë¶ˆí•˜ëŠ” ê²ƒì€ ê·¼ë³¸ì ìœ¼ë¡œ ë°”ê¾¼ë‹¤ / <span class="highlight-blue">ì–´ë–»ê²Œ</span> ìš°ë¦¬ê°€ ëˆì„ ì“°ëŠ”ì§€ë¥¼"' },
        { type: 'interactive', title: 'íŒ¨í„´ 7: It is ~ that/to (ê°€ì£¼ì–´)', description: 'ë¬¸ì¥ ë§¨ ì•ì˜ Itì€ ëœ»ì´ ì—†ëŠ” ê°€ì£¼ì–´ì¼ ë•Œê°€ ë§ì•„ìš”. `ê·¸ê²ƒì€`ì´ë¼ê³  í•´ì„í•˜ì§€ ì•Šì•„ìš”!', rule_prompt: "a sentence starting with 'It' as a dummy subject", example: '"It was long thought that handedness could only be reliably determined in elementary school..."', explanation: '"ì˜¤ë«ë™ì•ˆ ìƒê°ëë‹¤ / ì™¼ì†ì¡ì´ ì„±í–¥ì€ ì˜¤ì§ ì´ˆë“±í•™êµ ë•Œ ê²°ì •ë  ìˆ˜ ìˆë‹¤ê³ ..."' },
        { type: 'interactive', title: 'íŒ¨í„´ 8: ë¶€ì •ì–´ ì£¼ì–´', description: 'No, Nothing ê°™ì€ ë¶€ì •ì–´ê°€ ì£¼ì–´ì¼ ë• `ì–´ë–¤/ì•„ë¬´ ~ë„ ì•„ë‹ˆë‹¤`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence starting with a negative word like 'No' or 'Nothing' as the subject", example: '"No lasting results can be achieved unless the individual convinces himself..."', explanation: '"<span class="highlight-red">ì–´ë–¤</span> ì§€ì†ë˜ëŠ” ê²°ê³¼<span class="highlight-red">ë„</span> ë‹¬ì„±ë  ìˆ˜ ì—†ë‹¤ / ê°œì¸ì´ ìŠ¤ìŠ¤ë¡œë¥¼ ë‚©ë“ì‹œí‚¤ì§€ ì•ŠëŠ” í•œ..."' },
        { type: 'interactive', title: 'íŒ¨í„´ 9: With + ëª©ì ì–´ + í˜„ì¬ë¶„ì‚¬', description: 'ëª©ì ì–´ê°€ ëŠ¥ë™ì ìœ¼ë¡œ `~í•˜ë©´ì„œ` ë˜ëŠ” `~í•œ ì±„ë¡œ` ë¼ê³  í•´ì„í•´ìš”.', rule_prompt: "a sentence using the 'with + noun + present participle' construction", example: '"With so many people moving to the city, many farmers need help..."', explanation: '"ì•„ì£¼ ë§ì€ ì‚¬ëŒë“¤ì´ ë„ì‹œë¡œ ì´ì£¼<span class="highlight-blue">í•˜ë©´ì„œ</span> / ë§ì€ ë†ë¶€ë“¤ì€ ë„ì›€ì´ í•„ìš”í•˜ë‹¤..."' },
        { type: 'interactive', title: 'íŒ¨í„´ 9: With + ëª©ì ì–´ + ê³¼ê±°ë¶„ì‚¬', description: 'ëª©ì ì–´ê°€ ìˆ˜ë™ì ìœ¼ë¡œ `~ë˜ë©´ì„œ` ë˜ëŠ” `~ëœ ì±„ë¡œ` ë¼ê³  í•´ì„í•´ìš”.', rule_prompt: "a sentence using the 'with + noun + past participle' construction", example: '"She lay still, with her eyes closed."', explanation: '"ê·¸ë…€ëŠ” ê°€ë§Œíˆ ëˆ„ì›Œ ìˆì—ˆë‹¤ / ê·¸ë…€ì˜ ëˆˆì´ <span class="highlight-blue">ê°ê¸´ ì±„ë¡œ</span>"' },
        { type: 'interactive', title: 'íŒ¨í„´ 10: ë¶€ì—° ì„¤ëª… ê¸°í˜¸ (â€“, :, ;)', description: 'ì½¤ë§ˆ(,), ì§ëŒ€ê¸°(-), ì½œë¡ (:), ì„¸ë¯¸ì½œë¡ (;)ì€ ë¶€ì—°ì„¤ëª…! <span class="highlight-yellow">"ì¦‰,"</span> ì´ë¼ê³  ì½ìœ¼ë©´ í¸í•´ìš”.', rule_prompt: "a sentence using a dash for elaboration", example: '"...long before elementary school â€” interestingly, even before birth in most people."', explanation: '"...ì´ˆë“±í•™êµ í›¨ì”¬ ì´ì „ì— â€” <span class="highlight-blue">ì¦‰,</span> í¥ë¯¸ë¡­ê²Œë„, ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì—ê²ŒëŠ” íƒœì–´ë‚˜ê¸° ì „ì—ë„"' },
        { type: 'interactive', title: 'íŒ¨í„´ 11: It is ~ that ê°•ì¡°', description: '`that ì´í•˜ì¸ ê²ƒì€ ë°”ë¡œ ~ì´ë‹¤` ë¼ê³  í•´ì„í•´ì„œ ê°•ì¡°ì˜ ëŠë‚Œì„ ì‚´ë ¤ì¤˜ìš”.', rule_prompt: "an 'it-cleft' sentence (It is... that...)", example: '"It is I that am responsible for that."', explanation: '"ê·¸ê²ƒì— ëŒ€í•´ ì±…ì„ ìˆëŠ” ì‚¬ëŒì€ <span class="highlight-red">ë°”ë¡œ</span> ë‚˜ë‹¤."' },
        { type: 'interactive', title: 'íŒ¨í„´ 12: find O C', description: 'findë¥¼ `ì°¾ë‹¤`ê°€ ì•„ë‹ˆë¼ `ì•Œë‹¤, ìƒê°í•˜ë‹¤`ë¡œ í•´ì„í•˜ë©´ ë” ìì—°ìŠ¤ëŸ¬ìš¸ ë•Œê°€ ë§ì•„ìš”.', rule_prompt: "a sentence using 'find' to mean 'realize' or 'think'", example: '"I find that you could have gotten better grades."', explanation: '"ë‚˜ëŠ” <span class="highlight-blue">ìƒê°í•œë‹¤</span> / ë„¤ê°€ ë” ë‚˜ì€ ì ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ë„ ìˆì—ˆë‹¤ëŠ” ê±¸."' },
        { type: 'interactive', title: 'íŒ¨í„´ 13: ì¡°ë™ì‚¬ have pp (ì¶”ì¸¡)', description: '`must have pp`ëŠ” ê³¼ê±° ì‚¬ì‹¤ì— ëŒ€í•œ ê°•í•œ ì¶”ì¸¡ì„ ë‚˜íƒ€ë‚´ë©°, `~í–ˆìŒì— í‹€ë¦¼ì—†ë‹¤`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence using 'must have' + past participle", example: '"The phone rang but I didn\'t hear it. I must have been asleep."', explanation: '"ì „í™”ê°€ ìš¸ë ¸ì§€ë§Œ ë‚˜ëŠ” ê·¸ê±¸ ë“£ì§€ ëª»í–ˆë‹¤. ë‚˜ëŠ” ì ë“¤ì—ˆìŒ<span class="highlight-blue">ì— í‹€ë¦¼ì—†ë‹¤</span>."' },
        { type: 'interactive', title: 'íŒ¨í„´ 13: ì¡°ë™ì‚¬ have pp (í›„íšŒ)', description: '`should have pp`ëŠ” ê³¼ê±°ì— í•˜ì§€ ì•Šì€ ì¼ì— ëŒ€í•œ í›„íšŒë¥¼ ë‚˜íƒ€ë‚´ë©°, `~í–ˆì–´ì•¼ í–ˆë‹¤`ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence using 'should have' + past participle", example: '"I should have apologized to him before his death."', explanation: '"ë‚˜ëŠ” ê·¸ì—ê²Œ ì‚¬ê³¼í–ˆì—ˆì–´ì•¼ <span class="highlight-blue">í–ˆë‹¤</span> / ê·¸ì˜ ì£½ìŒ ì „ì—."' },
        { type: 'interactive', title: 'íŒ¨í„´ 14: As ì›ê¸‰ As', description: 'ì²« ë²ˆì§¸ asëŠ” ë¬´ì‹œ! ë‘ ë²ˆì§¸ asë§Œ `~ë§Œí¼`, `~ì²˜ëŸ¼`ìœ¼ë¡œ í•´ì„í•´ìš”.', rule_prompt: "a sentence with the 'as...as' comparison structure", example: '"You should know that stimulants are as likely to have negative effects on memory as they are to be beneficial."', explanation: '"ë„ˆëŠ” ì•Œì•„ì•¼ í•œë‹¤ / ìê·¹ì œë“¤ì´ ê¸°ì–µì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¼ì¹  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ëŠ” ê²ƒì„ / ê·¸ê²ƒë“¤ì´ ì´ë¡œìš´ ê²ƒ<span class="highlight-blue">ë§Œí¼</span>."' },
        { type: 'interactive', title: 'íŒ¨í„´ 15: ë³‘ë ¬ êµ¬ì¡°', description: 'and/orë¡œ ì—°ê²°ëœ ë‹¨ì–´ ì¤‘ í•˜ë‚˜ë§Œ ì•Œì•„ë„ ì˜ë¯¸ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”!', rule_prompt: "a sentence with a parallel structure using 'and' or 'or' to connect three or more items", example: '"For example, migrants are assumed to overcrowd cities, clog up labor markets, and increase poverty."', explanation: 'ë§Œì•½ clog up(ë§‰ë‹¤)ì„ ëª°ë¼ë„, overcrowd(ì´ˆê³¼ë°€í•˜ê²Œ í•˜ë‹¤)ì™€ increase poverty(ë¹ˆê³¤ì„ ì¦ê°€ì‹œí‚¤ë‹¤)ë¥¼ í†µí•´ <span class="highlight-red">ë¶€ì •ì ì¸ ë‚´ìš©</span>ì´ë¼ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆì–´ìš”.' },
        { type: 'interactive', title: 'íŒ¨í„´ 16: in ing / by ing', description: '`in ing`ëŠ” `~í•˜ëŠ” ë° ìˆì–´ì„œ`, `by ing`ëŠ” `~í•¨ìœ¼ë¡œì¨`ë¡œ í•´ì„í•˜ëŠ” ì¤‘ìš”í•œ í‘œí˜„ì´ì—ìš”.', rule_prompt: "a phrase using 'in' + gerund", example: '"difficulty in sharing scientific knowledge with the public"', explanation: '"ì–´ë ¤ì›€ / ê³¼í•™ì  ì§€ì‹ì„ ëŒ€ì¤‘ê³¼ ê³µìœ í•˜ëŠ” ë° <span class="highlight-blue">ìˆì–´ì„œ</span>ì˜"' },
        { type: 'final', title: 'ìˆ˜ê³ í–ˆì–´ìš”! ğŸ‰', subtitle: 'ì´ì œ ì—¬ëŸ¬ë¶„ë„ ë…í•´ ì „ë¬¸ê°€!', content: 'ì˜¤ëŠ˜ ë°°ìš´ ê·œì¹™ê³¼ íŒ¨í„´ë“¤ì„ ê¾¸ì¤€íˆ ì—°ìŠµí•˜ë©´, ì•„ë¬´ë¦¬ ê¸´ ë¬¸ì¥ì´ë¼ë„ ë©ì–´ë¦¬ë¡œ ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ í•´ì„í•  ìˆ˜ ìˆê²Œ ë  ê±°ì˜ˆìš”!' },
    ];

    // --- Core Logic ---
    (function() {
        const container = document.getElementById('slides-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const slideCounter = document.getElementById('slide-counter');
        
        const apiKey = ""; // API í‚¤ëŠ” ì—¬ê¸°ì— ì…ë ¥í•˜ê±°ë‚˜ ë¹„ì›Œë‘ì„¸ìš”.
        let currentSlide = 0;
        const totalSlides = slideData.length;

        function createSlide(data, index) {
            let slideHTML = '';
            if (data.type === 'cover') {
                slideHTML = `<div class="slide-content text-center flex flex-col justify-center items-center h-full">
                                <h1 class="text-5xl md:text-6xl font-black text-gray-800 mb-4">${data.title}</h1>
                                <p class="text-2xl md:text-3xl font-bold text-blue-600">${data.subtitle}</p>
                            </div>`;
            } else if (data.type === 'title' || data.type === 'final') {
                slideHTML = `<div class="slide-content text-center">
                        <h1 class="text-4xl md:text-5xl font-black text-gray-800 mb-4">${data.title}</h1>
                        ${data.subtitle ? `<h2 class="text-2xl md:text-3xl font-bold text-blue-600 mb-8">${data.subtitle}</h2>` : ''}
                        <p class="text-lg text-gray-600 max-w-2xl mx-auto">${data.content}</p>
                        ${data.type === 'final' ? `<div class="mt-8 border-t pt-6">
                            <h3 class="text-2xl font-bold text-purple-700">AI ì‹¤ë ¥ ì ê²€ í€´ì¦ˆ</h3>
                            <p class="text-gray-600 mt-2 mb-4">ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ë‚´ìš©ìœ¼ë¡œ AIê°€ ë§Œë“  í€´ì¦ˆë¥¼ í’€ì–´ë³´ì„¸ìš”!</p>
                            <button id="quiz-button" class="base-button gemini-button">í€´ì¦ˆ í’€ì–´ë³´ê¸° âœ¨</button>
                            <div id="quiz-container" class="mt-4 text-left"></div>
                        </div>
                        <button id="restart-button" class="base-button reveal-button mt-8">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë³´ê¸°</button>` : ''}
                    </div>`;
            } else if (data.type === 'animated-list') {
                const itemsHTML = data.items.map((item, i) => 
                    `<div class="animated-item bg-white p-4 rounded-lg shadow-md text-center text-xl font-semibold text-gray-700" style="transition-delay: ${i * 200}ms;">${item}</div>`
                ).join('');
                slideHTML = `<div class="slide-content text-center">
                        <h1 class="text-3xl md:text-4xl font-black text-gray-800 mb-8">${data.title}</h1>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-3xl mx-auto">
                            ${itemsHTML}
                        </div>
                        <button id="start-animation-button" class="base-button reveal-button mt-10">ë©ì–´ë¦¬ í™•ì¸í•˜ê¸°!</button>
                    </div>`;
            } else if (data.type === 'animated-text-reveal') {
                const itemsHTML = data.items.map((item, i) => 
                    `<div class="animated-item text-center ${item.class}" style="transition-delay: ${i * 1000}ms;">${item.text}</div>`
                ).join('');
                slideHTML = `<div class="slide-content flex flex-col justify-center items-center h-full">
                                <h1 class="text-5xl font-black text-gray-800 mb-16">${data.title}</h1>
                                <div class="space-y-8">${itemsHTML}</div>
                                <button id="start-animation-button" class="base-button reveal-button mt-16">í™•ì¸í•˜ê¸°</button>
                            </div>`;
            } else if (data.type === 'overview') {
                const sectionsHTML = data.sections.map(section => 
                    `<div class="bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-bold text-lg text-blue-800">${section.title}</h3>
                        <p class="text-gray-600">${section.description}</p>
                    </div>`
                ).join('');
                slideHTML = `<div class="slide-content">
                        <h1 class="text-3xl md:text-4xl font-black text-gray-800 text-center mb-4">${data.title}</h1>
                        <p class="text-lg text-gray-600 text-center mb-8">${data.content}</p>
                        <div class="grid md:grid-cols-2 gap-4">
                            ${sectionsHTML}
                        </div>
                    </div>`;
            } else if (data.type === 'simple') {
                 slideHTML = `<div class="slide-content">
                        <h1 class="text-3xl md:text-4xl font-black text-gray-800 mb-2">${data.title}</h1>
                        ${data.subtitle ? `<h2 class="text-xl md:text-2xl font-bold text-blue-600 mb-6">${data.subtitle}</h2>` : ''}
                        <p class="text-lg text-gray-600 mb-6">${data.content}</p>
                        <div class="example-box">
                            <p class="text-gray-500 text-sm mb-2 font-bold">ë„ì „ ë¬¸ì¥</p>
                            <p class="text-md text-gray-800 leading-relaxed font-semibold">${data.example}</p>
                        </div>
                    </div>`;
            } else if (data.type === 'interactive') {
                 slideHTML = `<div class="slide-content">
                        <h1 class="text-3xl md:text-4xl font-black text-gray-800 mb-4">${data.title}</h1>
                        <p class="text-lg text-gray-600 mb-4">${data.description}</p>
                        <div class="example-box">
                            <p class="text-gray-500 text-sm mb-2 font-bold">ì›ë¬¸</p>
                            <p class="text-md text-gray-800" data-role="example-text">${data.example}</p>
                        </div>
                        <div class="flex items-center flex-wrap">
                            <button class="base-button reveal-button">${data.buttonText || 'ê·œì¹™ ì ìš©! âœ¨'}</button>
                             ${data.rule_prompt ? `<button class="base-button gemini-button" data-rule-prompt="${data.rule_prompt}">ìƒˆë¡œìš´ ì˜ˆë¬¸ ë§Œë“¤ê¸° âœ¨</button>` : ''}
                           <button class="base-button gemini-button analysis-button">AI ì‹¬ì¸µ ë¶„ì„ âœ¨</button>
                        </div>
                        <div class="hidden-content explanation-container">
                            <div class="explanation-box">
                                <p class="text-gray-500 text-sm mb-2 font-bold">ì ìš© ì˜ˆì‹œ</p>
                                <p class="text-md text-blue-800 font-semibold" data-role="explanation-text">${data.explanation}</p>
                            </div>
                        </div>
                        <div class="hidden-content analysis-container">
                             <div class="analysis-box"></div>
                        </div>
                    </div>`;
            }
            const slideDiv = document.createElement('div');
            slideDiv.id = `slide-${index}`;
            slideDiv.className = 'slide hidden';
            slideDiv.innerHTML = slideHTML;
            return slideDiv;
        }

        async function callGemini(prompt, schema) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }], generationConfig: { responseMimeType: "application/json", responseSchema: schema } };
            try {
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status}`);
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0) return JSON.parse(result.candidates[0].content.parts[0].text);
                else throw new Error("APIë¡œë¶€í„° ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
            } catch (error) {
                console.error("Gemini API í˜¸ì¶œ ì˜¤ë¥˜:", error);
                return null;
            }
        }
        
        async function handleGenerateExample(button) { 
            const rulePrompt = button.dataset.rulePrompt;
            if (!rulePrompt) return;
            const originalText = button.textContent;
            button.textContent = 'ìƒì„± ì¤‘...';
            button.disabled = true;
            const prompt = `Please create a new, simple English example sentence that clearly demonstrates the following grammatical rule: "${rulePrompt}". Also provide its natural Korean translation, highlighting the key part of the rule in the translation with <span> tags if appropriate. Return as a JSON object with keys "english" and "korean".`;
            const schema = { type: "OBJECT", properties: { "english": { "type": "STRING" }, "korean": { "type": "STRING" } } };
            const result = await callGemini(prompt, schema);
            if (result && result.english && result.korean) {
                const slideContent = button.closest('.slide-content');
                slideContent.querySelector('[data-role="example-text"]').textContent = result.english;
                slideContent.querySelector('[data-role="explanation-text"]').innerHTML = result.korean;
                slideContent.querySelector('.explanation-container').classList.remove('visible-content');
                slideContent.querySelector('.analysis-container').classList.remove('visible-content');
                slideContent.querySelector('.analysis-container .analysis-box').innerHTML = '';
            } else {
                alert("ìƒˆë¡œìš´ ì˜ˆë¬¸ì„ ë§Œë“œëŠ” ë° ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            }
            button.textContent = originalText;
            button.disabled = false;
        }

        async function handleAnalysis(button) {
            const slideContent = button.closest('.slide-content');
            const analysisContainer = slideContent.querySelector('.analysis-container');
            const analysisBox = analysisContainer.querySelector('.analysis-box');
            
            if (analysisContainer.classList.contains('visible-content')) {
                analysisContainer.classList.remove('visible-content');
                return;
            }

            const sentence = slideContent.querySelector('[data-role="example-text"]').textContent.replace(/ \/ /g, ''); // Remove slashes for analysis
            const ruleTitle = slideContent.querySelector('h1').textContent;
            
            const originalText = button.textContent;
            button.textContent = 'ë¶„ì„ ì¤‘...';
            button.disabled = true;
            analysisBox.innerHTML = '<p>AIê°€ ë¬¸ì¥ì„ ì‹¬ì¸µ ë¶„ì„í•˜ê³  ìˆì–´ìš”...</p>';
            analysisContainer.classList.add('visible-content');

            const prompt = `Analyze the following English sentence: "${sentence}". Provide a grammatical analysis based on the rule: "${ruleTitle}". Your analysis should be in a JSON object with the following keys: "breakdown" (a string explaining the subject, verb, and object in Korean), "rule_explanation" (a string explaining how the specific rule applies to this sentence in Korean), and "vocabulary" (an array of objects, where each object has a "word" key and a "meaning" key in Korean).`;
            const schema = {
              type: "OBJECT",
              properties: {
                "breakdown": { "type": "STRING" },
                "rule_explanation": { "type": "STRING" },
                "vocabulary": {
                  "type": "ARRAY",
                  "items": {
                    "type": "OBJECT",
                    "properties": { "word": { "type": "STRING" }, "meaning": { "type": "STRING" } },
                    "required": ["word", "meaning"]
                  }
                }
              },
              required: ["breakdown", "rule_explanation", "vocabulary"]
            };

            const result = await callGemini(prompt, schema);

            if (result) {
                let vocabHTML = result.vocabulary.map(v => `<li><span class="font-semibold">${v.word}</span>: ${v.meaning}</li>`).join('');
                analysisBox.innerHTML = `
                    <h4 class="font-bold text-lg text-purple-800">êµ¬ì¡° ë¶„ì„</h4>
                    <p class="mt-1 mb-3 text-sm">${result.breakdown}</p>
                    <h4 class="font-bold text-lg text-purple-800">ê·œì¹™ ì„¤ëª…</h4>
                    <p class="mt-1 mb-3 text-sm">${result.rule_explanation}</p>
                    <h4 class="font-bold text-lg text-purple-800">í•µì‹¬ ì–´íœ˜</h4>
                    <ul class="list-disc list-inside mt-1 text-sm">${vocabHTML}</ul>
                `;
            } else {
                analysisBox.innerHTML = '<p>ë¶„ì„ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
            }

            button.textContent = originalText;
            button.disabled = false;
        }
        
        async function handleGenerateQuiz(button) { 
            const quizContainer = document.getElementById('quiz-container');
            if (!quizContainer) return;
            button.textContent = 'í€´ì¦ˆ ë§Œë“œëŠ” ì¤‘...';
            button.disabled = true;
            quizContainer.innerHTML = '<p>AIê°€ ì—´ì‹¬íˆ í€´ì¦ˆë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”! ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>';
            const rulesContext = slideData.filter(s => s.type === 'interactive').map(s => s.title).join(', ');
            const prompt = `Based on these English grammar rules (${rulesContext}), create a 3-question multiple-choice quiz. For each question, provide a 'question' sentence with a blank (___), four 'options' as an array of strings, and the zero-indexed 'answer' number. Return as a JSON array.`;
            const schema = { type: "ARRAY", items: { type: "OBJECT", properties: { "question": { "type": "STRING" }, "options": { "type": "ARRAY", "items": { "type": "STRING" } }, "answer": { "type": "NUMBER" } } } };
            const quizData = await callGemini(prompt, schema);
            if (quizData && quizData.length > 0) {
                renderQuiz(quizData, quizContainer);
            } else {
                quizContainer.innerHTML = '<p>í€´ì¦ˆë¥¼ ë§Œë“œëŠ” ë° ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
            }
            button.style.display = 'none';
        }

        function renderQuiz(quizData, container) { 
            container.innerHTML = '';
            const form = document.createElement('form');
            form.id = 'quiz-form';
            quizData.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-6 p-4 bg-gray-50 rounded-lg';
                let optionsHTML = '';
                item.options.forEach((option, i) => {
                    optionsHTML += `<label class="block p-2 rounded-md cursor-pointer quiz-option"><input type="radio" name="question-${index}" value="${i}" class="mr-2">${option}</label>`;
                });
                questionDiv.innerHTML = `<p class="font-bold mb-2">${index + 1}. ${item.question}</p><div class="space-y-1">${optionsHTML}</div><div data-role="feedback" class="mt-2 font-bold"></div>`;
                form.appendChild(questionDiv);
            });
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'base-button reveal-button';
            submitButton.textContent = 'ì •ë‹µ í™•ì¸í•˜ê¸°';
            form.appendChild(submitButton);
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                let score = 0;
                quizData.forEach((item, index) => {
                    const questionBlock = e.target.querySelector(`input[name="question-${index}"]`).closest('.mb-6');
                    const feedbackEl = questionBlock.querySelector('div[data-role="feedback"]');
                    
                    const selected = questionBlock.querySelector(`input[name="question-${index}"]:checked`);
                    
                    if (selected) {
                        if (parseInt(selected.value) === item.answer) {
                            score++;
                            feedbackEl.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘';
                            feedbackEl.className = 'mt-2 font-bold text-green-600';
                        } else {
                            feedbackEl.textContent = `í‹€ë ¸ì–´ìš”. ì •ë‹µì€ "${item.options[item.answer]}" ì…ë‹ˆë‹¤.`;
                            feedbackEl.className = 'mt-2 font-bold text-red-600';
                        }
                    } else {
                        feedbackEl.textContent = 'ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!';
                        feedbackEl.className = 'mt-2 font-bold text-yellow-600';
                    }
                });
                const scoreResult = document.createElement('p');
                scoreResult.className = 'text-center text-xl font-bold mt-4';
                scoreResult.textContent = `ì´ ${quizData.length}ë¬¸ì œ ì¤‘ ${score}ê°œë¥¼ ë§í˜”ì–´ìš”!`;
                if(!form.querySelector('p.text-center')) {
                    form.appendChild(scoreResult);
                }
            });
            container.appendChild(form);
        }

        function renderSlides() {
            slideData.forEach((data, index) => {
                const slideElement = createSlide(data, index);
                container.appendChild(slideElement);
            });
        }

        function updateSlideView() {
            const slides = document.querySelectorAll('.slide');
            slides.forEach((slide, index) => {
                if (index === currentSlide) {
                    slide.classList.remove('hidden');
                    setTimeout(() => slide.style.opacity = 1, 50);
                } else {
                    slide.style.opacity = 0;
                    slide.classList.add('hidden');
                }
            });
            slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
            prevButton.disabled = currentSlide === 0;
            nextButton.disabled = currentSlide === totalSlides - 1;
        }
        
        function resetSlideContent(slideIndex) {
            const slide = document.getElementById(`slide-${slideIndex}`);
            if(slide) {
                const explanation = slide.querySelector('.explanation-container');
                if(explanation) explanation.classList.remove('visible-content');
                
                const analysis = slide.querySelector('.analysis-container');
                if(analysis) {
                    analysis.classList.remove('visible-content');
                    analysis.querySelector('.analysis-box').innerHTML = '';
                }
            }
        }

        function handleNav(direction) {
            resetSlideContent(currentSlide);
            if (direction === 'next' && currentSlide < totalSlides - 1) currentSlide++;
            else if (direction === 'prev' && currentSlide > 0) currentSlide--;
            updateSlideView();
        }

        function restart() {
            resetSlideContent(currentSlide);
            currentSlide = 0;
            updateSlideView();
            const quizContainer = document.getElementById('quiz-container');
            const quizButton = document.getElementById('quiz-button');
            if(quizContainer && quizButton) {
                quizContainer.innerHTML = '';
                quizButton.style.display = 'inline-block';
                quizButton.disabled = false;
                quizButton.textContent = 'í€´ì¦ˆ í’€ì–´ë³´ê¸° âœ¨';
            }
        }

        container.addEventListener('click', function(e) {
            if (e.target.id === 'start-animation-button') {
                const items = e.target.closest('.slide-content').querySelectorAll('.animated-item');
                items.forEach(item => item.classList.add('visible'));
                e.target.textContent = 'í™•ì¸ ì™„ë£Œ!';
                e.target.disabled = true;
            } else if (e.target.id === 'quiz-button') {
                handleGenerateQuiz(e.target);
            } else if (e.target.id === 'restart-button') {
                restart();
            } else if (e.target.matches('.reveal-button')) {
                const explanation = e.target.closest('.slide-content').querySelector('.explanation-container');
                if (explanation) explanation.classList.toggle('visible-content');
            } else if (e.target.matches('.gemini-button.analysis-button')) {
                handleAnalysis(e.target);
            } else if (e.target.matches('.gemini-button')) {
                handleGenerateExample(e.target);
            }
        });

        renderSlides();
        updateSlideView();
        nextButton.addEventListener('click', () => handleNav('next'));
        prevButton.addEventListener('click', () => handleNav('prev'));
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') handleNav('next');
            else if (e.key === 'ArrowLeft') handleNav('prev');
        });
    })();
    </script>
</body>
</html>
